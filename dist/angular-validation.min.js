(function(){angular.module("validation",["validation.provider","validation.directive"])}).call(this),function(){angular.module("validation.provider",[]).provider("$validation",function(){var a,b,c,d,e,f=this,g=function(f){a=f,b=a.get("$rootScope"),c=a.get("$http"),d=a.get("$q"),e=a.get("$timeout")},h={required:/^.+$/,url:/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/,email:/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,number:/^\d+$/},i={required:{error:"This should be Required!!",success:"It's Required"},url:{error:"This should be Url",success:"It's Url"},email:{error:"This should be Email",success:"It's Email"},number:{error:"This should be Number",success:"It's Number"}};this.setExpression=function(a){angular.extend(h,a)},this.getExpression=function(a){return h[a]},this.setDefaultMsg=function(a){angular.extend(i,a)},this.getDefaultMsg=function(a){return i[a]},this.setErrorHTML=function(a){a.constructor===Function&&(f.getErrorHTML=a)},this.getErrorHTML=function(a){return'<p class="validation-invalid">'+a+"</p>"},this.setSuccessHTML=function(a){a.constructor===Function&&(f.getSuccessHTML=a)},this.getSuccessHTML=function(a){return'<p class="validation-valid">'+a+"</p>"},this.showSuccessMessage=!0,this.showErrorMessage=!0,this.checkValid=function(a){return void 0===a.$valid?!1:a&&a.$valid===!0},this.validate=function(a){var c=0;for(var g in a)a[g].hasOwnProperty("$dirty")&&b.$broadcast(g+"submit",c++);var h=d.defer();return h.promise.success=function(a){return h.promise.then(function(b){a(b)}),h.promise},h.promise.error=function(a){return h.promise.then(null,function(b){a(b)}),h.promise},e(function(){f.checkValid(a)?h.resolve("success"):h.reject("error")}),h.promise},this.reset=function(a){for(var c in a)a[c].hasOwnProperty("$dirty")&&b.$broadcast(c+"reset")},this.$get=["$injector",function(a){return g(a),{setErrorHTML:this.setErrorHTML,getErrorHTML:this.getErrorHTML,setSuccessHTML:this.setSuccessHTML,getSuccessHTML:this.getSuccessHTML,setExpression:this.setExpression,getExpression:this.getExpression,setDefaultMsg:this.setDefaultMsg,getDefaultMsg:this.getDefaultMsg,showSuccessMessage:this.showSuccessMessage,showErrorMessage:this.showErrorMessage,checkValid:this.checkValid,validate:this.validate,reset:this.reset}}]})}.call(this),function(){angular.module("validation.directive",["validation.provider"]).directive("validator",["$injector",function(a){var b=a.get("$validation"),c=a.get("$q"),d=a.get("$timeout"),e=function(a,c,d,e,f,g){var h;return b.showSuccessMessage?c?a.next().html(b.getSuccessHTML(c)):(h=b.getDefaultMsg(d).success.constructor,h===Function?a.next().html(b.getSuccessHTML(b.getDefaultMsg(d).success(g))):h===String&&a.next().html(b.getSuccessHTML(b.getDefaultMsg(d).success))):a.next().html(""),f.$setValidity(f.$name,!0),e&&e(),!0},f=function(a,c,d,e,f,g){var h;return b.showErrorMessage?c?a.next().html(b.getErrorHTML(c)):(h=b.getDefaultMsg(d).error.constructor,h===Function?a.next().html(b.getErrorHTML(b.getDefaultMsg(d).error(g))):h===String&&a.next().html(b.getErrorHTML(b.getDefaultMsg(d).error))):a.next().html(""),f.$setValidity(f.$name,!1),e&&e(),!1},g=!1,h=function(a,d,g,h,i,j){var k=i+"SuccessMessage",l=i+"ErrorMessage",m=b.getExpression(i).constructor,n={success:function(){return e(d,g[k],i,a.validCallback,h,g)},error:function(){return f(d,g[l],i,a.invalidCallback,h,g)}};return m===Function?c.all([b.getExpression(i)(j,a,d,g)]).then(function(a){return a&&a.length>0&&a[0]?n.success():n.error()},function(){return n.error()}):m===RegExp&&b.getExpression(i).test(j)?n.success():n.error()};return{restrict:"A",require:"ngModel",scope:{model:"=ngModel",validCallback:"&",invalidCallback:"&"},link:function(a,b,c,e){var f=function(){},i=c.validator.split(",");b.after("<span></span>"),a.$on(e.$name+"reset",function(){f(),g=!1,e.$setViewValue(""),e.$setPristine(),e.$render(),b.next().html("")}),i.forEach(function(d){return a.$on(e.$name+"submit",function(i,j){var k=b[0].value,l=!1;0==j&&(g=!1),l=h(a,b,c,e,d,k),"submit"===c.validMethod&&(f(),f=a.$watch("model",function(f,g){f!==g&&((void 0===f||null===f)&&(f=""),l=h(a,b,c,e,d,f))})),g||l||(g=!0,b[0].focus())}),"blur"===c.validMethod?void b.bind("blur",function(){var f=b[0].value;a.$apply(function(){h(a,b,c,e,d,f)})}):void("submit"!==c.validMethod&&"submit-only"!==c.validMethod&&a.$watch("model",function(f){if(e.$pristine&&e.$viewValue)e.$setViewValue(e.$viewValue);else if(e.$pristine)return void b.next().html("");h(a,b,c,e,d,f)}))}),d(function(){c.$observe("noValidationMessage",function(a){var c=b.next();"true"==a||1==a?c.css("display","none"):("false"==a||0==a)&&c.css("display","block")})})}}}])}.call(this);